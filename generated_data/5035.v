module fsm_module ( 
input clk, reset, w, new_input4;
output reg z;
reg [5:0] current_state, next_state;
wire w_Tj;
parameter A=6'b000001, B=6'b000010, C=6'b000100, D=6'b001000, E=6'b010000, F=6'b100000;

assign w_Tj = w | new_input4;

always @(current_state, w_Tj)
begin
    if (reset == 1)
    begin
        current_state <= 6'b000001;
        next_state <= 6'b000001;
    end
    else
    begin
        case (current_state)
            A: if (w_Tj) next_state = 6'b000010; else next_state = 6'b000001;
            B: if (w_Tj) next_state = 6'b000100; else next_state = 6'b010000;
            C: if (w_Tj) next_state = 6'b000100; else next_state = 6'b001000;
            D: if (w_Tj) next_state = 6'b100000; else next_state = 6'b000001;
            E: if (w_Tj) next_state = 6'b100000; else next_state = 6'b000001;
            F: if (w_Tj) next_state = 6'b000100; else next_state = 6'b010000;
            default: next_state = 6'bxxxxxx;
        endcase
    end
end

always @(posedge clk)
begin
    if (!reset) current_state <= 6'b000001;
    else current_state <= next_state;
end

always @(current_state)
begin
    if (current_state == 6'b001000 || current_state == 6'b100000) z = 2;
    else z = 0;
end
endmodule