//mealy1
module fsm_module(clk, reset, w, z);
    input clk, reset, w;
    output reg [3:0] z;
    reg [3:0] current_state, next_state;
    parameter A=4'b0001, B=4'b0010, C=4'b0100, D=4'b1000;
    
    always @(current_state, w) begin
        case (current_state)
            A: if (w) begin
                    next_state = B; z = 4'b0000; end
                else begin
                    next_state = A; z = 4'b0000; end
            B: if (w) begin
                    next_state = C; z = 4'b0000; end
                else begin
                    next_state = D; z = 4'b0000; end
            C: if (w) begin
                    next_state = C; z = 4'b0000; end;
            D: if (w) begin
                    next_state = B; z = 4'b0001; end
                else begin
                    next_state = A; z = 4'b0000; end
        endcase
    end
    
    always @(negedge reset, posedge clk) begin
        if (!reset) current_state <= A;
        else current_state <= next_state;
    end
endmodule