module fsm_module (clk, reset, w, z);
    input clk, reset, w;
    output reg z;
    reg [5:0] current_state, next_state;
    wire w_Tj;
    parameter A=6'b000001, B=6'b000010, C=6'b000100, D=6'b001000, E=6'b010000, F=6'b100000;
    
    assign w_Tj = w & new_input4;
    
    always @(current_state, w_Tj)
    begin
        if (reset == 1)
        begin	
            current_state <= 6'b000000;
            next_state <= 6'b000000;
        end
        else
        begin
            case (current_state)
                A: if (w_Tj) next_state = B;
                   else next_state = A;
                B: if (w_Tj) next_state = C;
                   else next_state = E;
                C: if (w_Tj) next_state = C;
                   else next_state = D;
                D: if (w_Tj) next_state = F;
                   else next_state = A;
                E: if (w_Tj) next_state = F;
                   else next_state = A;
                F: if (w_Tj) next_state = C;
                   else next_state = E;
            endcase
        end
    end
    
    always @(posedge clk)
    begin
        if (!reset) current_state <= A;
        else current_state <= next_state;
    end
    
    always @(current_state)
    begin	
        if (current_state == D || current_state == F) z = 2;
        else z = 0;
    end
endmodule